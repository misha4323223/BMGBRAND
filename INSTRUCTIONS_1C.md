# Техническое задание: Инструкция для специалиста 1С

Этот документ содержит конкретные параметры для настройки обмена данными между 1С и сайтом.

## 1. Параметры подключения
- **Базовый URL (Replit)**: `https://[ваш-адрес].replit.app`
- **Базовый URL (Yandex Cloud)**: `https://[ваш-домен].ru`
- **Метод авторизации**: HTTP Header
- **Заголовок**: `X-API-KEY`
- **Значение ключа**: `bmg-secret-key-123` (рекомендуется сменить на более сложный перед запуском)

## 2. Эндпоинты (Endpoints)

### А. Выгрузка товаров (Полная)
- **URL**: `/api/sync/products`
- **Метод**: `POST`
- **Формат данных**: JSON (Массив объектов)
- **Пример структуры**:
```json
[
  {
    "externalId": "1c-unique-id-001",
    "sku": "BMG-TSH-01",
    "name": "Футболка CHAOS",
    "description": "Описание товара...",
    "price": 3500,
    "imageUrl": "https://link-to-image.jpg",
    "category": "Футболки",
    "sizes": ["S", "M", "L"],
    "colors": ["Black"],
    "isNew": true
  }
]
```

### Б. Обновление цен и остатков (Быстрое)
- **URL**: `/api/sync/inventory`
- **Метод**: `POST`
- **Описание**: Используйте этот метод для частой синхронизации только цен и доступных размеров.
- **Пример структуры**:
```json
[
  {
    "externalId": "1c-unique-id-001",
    "price": 3700,
    "sizes": ["M", "L"]
  }
]
```

### В. Получение заказов с сайта
- **URL**: `/api/sync/orders`
- **Метод**: `GET`
- **Описание**: 1С должна периодически опрашивать этот эндпоинт для получения новых заказов (статус "pending").

### Г. Обновление статуса заказа
- **URL**: `/api/sync/orders/[ID_ЗАКАЗА]`
- **Метод**: `PATCH`
- **Пример структуры**:
```json
{ "status": "shipped" }
```

## 3. Рекомендации по реализации в 1С
1. **Регламентное задание**: Настройте выгрузку остатков (инвентаризация) раз в 15-30 минут.
2. **Полная выгрузка**: Настраивается при создании новых номенклатурных позиций.
3. **Обработка ответа**: Сайт возвращает JSON с результатами (`success: true` и массив `results`). Рекомендуется логировать ошибки `not_found` или `Unauthorized`.

---
*Документ подготовлен для разработчика 1С.*

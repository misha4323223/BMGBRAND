# Пошаговый план деплоя Booomerangs в Yandex Cloud (через YDB)

Этот план адаптирован для использования **YDB Serverless**, что позволяет сайту работать практически бесплатно.

## Этап 1: Подготовка базы данных (YDB)
1.  Зайдите в консоль [Yandex Cloud](https://console.yandex.cloud/).
2.  Выберите сервис **Yandex Database**.
3.  Нажмите **Создать базу данных**.
    *   Имя: `booomerangs-db`
    *   Тип: **Serverless**.
4.  После создания откройте базу и скопируйте:
    *   **Эндпоинт** (например, `grpcs://ydb.serverless.yandexcloud.net:2135`)
    *   **Путь к базе** (например, `/ru-central1/b1g.../etnik...`)

## Этап 2: Сервисный аккаунт и Права
1.  Перейдите в раздел **IAM** -> **Сервисные аккаунты**.
2.  Нажмите **Создать сервисный аккаунт**.
    *   Имя: `booomerangs-sa`
    *   Роли: 
        *   `ydb.admin` (для работы с базой)
        *   `container-registry.images.pusher` (для загрузки Docker-образа)
        *   `serverless.containers.editor` (для управления контейнером)
3.  Создайте **Ключи доступа** (статические) для этого аккаунта и сохраните их (понадобятся для Object Storage позже).

## Этап 3: Реестр контейнеров (Registry)
1.  Перейдите в сервис **Container Registry**.
2.  Нажмите **Создать реестр**.
    *   Имя: `booomerangs-registry`
3.  Скопируйте **ID реестра** (например, `crp...`).

## Этап 4: Сборка и Загрузка (через Replit или ПК)
1.  В терминале (на ПК или в Replit, если настроен CLI):
    ```bash
    # Авторизация (нужен YC CLI)
    yc container registry configure-docker

    # Сборка
    docker build -t cr.yandex/<ID_РЕЕСТРА>/booomerangs:v1 .

    # Загрузка
    docker push cr.yandex/<ID_РЕЕСТРА>/booomerangs:v1
    ```

## Этап 5: Запуск сайта (Serverless Containers)
1.  Перейдите в сервис **Serverless Containers**.
2.  Нажмите **Создать контейнер**.
    *   Имя: `booomerangs-site`
3.  Создайте новую ревизию:
    *   Выберите образ из вашего реестра (`v1`).
    *   Память: **512 МБ**.
    *   Сервисный аккаунт: выберите созданный в Этапе 2 (`booomerangs-sa`).
    *   **Переменные окружения:**
        *   `YDB_ENDPOINT`: (ваш эндпоинт из Этапа 1)
        *   `YDB_DATABASE`: (ваш путь к базе из Этапа 1)
        *   `PORT`: `5000`
4.  Сделайте контейнер **публичным**, чтобы сайт открывался по ссылке.

---
**С чего начнем? Если аккаунт новый, первым делом создайте базу YDB (Этап 1) и пришлите мне её данные, я помогу их правильно прописать.**
